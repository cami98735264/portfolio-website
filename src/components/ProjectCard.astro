---
import { Image } from "astro:assets";
import languages from "../data/languages.js";
const currentLanguage =
    Astro.url.searchParams.get("lang") === "en" ? "en" : "es";
const { title, description, github_url, live_url, images, alt } = Astro.props;
---

<div class="project__card">
    <div class="swiper">
        <div class="swiper-wrapper">
            {
                images.map((image) => {
                    return (
                        <a href={image.url} class="swiper-slide" data-pswp-width="1920" data-pswp-height="1080">
                            <Image loading="eager"
                                width={300}
                                height={300}
                                src={image.url}
                                alt={image.alt}
                            />
                        </a>
                    );
                })
            }
        </div>
        <div class="swiper-pagination"></div>
    </div>
    <h3>{title}</h3>
    <p>{description}</p>
    <div class="project__card__links">
        <a href={github_url} target="_blank"
            >{languages[currentLanguage].projects.github}</a
        >
        <a href={live_url} target="_blank"
            >{languages[currentLanguage].projects.live}</a
        >
    </div>
</div>

<style>
    .project__card {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 10px;
        width: 350px;
        border: 1px solid rgb(156, 155, 155);
        border-radius: 10px;
    }
    .swiper {
  width: 100%;
  height: 300px;
}   
    .project__card img {
        border-radius: 10px;
        width: 100%;
        height: 300px;
        object-fit: cover;
    }
    .project__card h3 {
        color: #fff;
        font-size: 1.6rem;
        font-weight: 600;
    }
    .project__card__links {
        display: flex;
        gap: 10px;
    }
</style>

<script>
    import Swiper from 'swiper';
import { Navigation, Pagination } from 'swiper/modules';
// import Swiper and modules styles
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import PhotoSwipeLightbox from 'photoswipe/lightbox';
import 'photoswipe/style.css';

const swiper = new Swiper('.swiper', {
    pagination: {
        el: '.swiper-pagination',
        clickable: true,
    },
    loop: true
});

const lightbox = new PhotoSwipeLightbox({
  gallery: '.swiper-wrapper',
  children: 'a',
  pswpModule: () => import('photoswipe')
});
// dinamically make it so every image of photoswipe has the same width and height

lightbox.init();

</script>
